<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safor Club de F√∫tbol Gandia</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="pagina-principal">

<header>
    <div class="logo-nav-container">
        <div class="logo-container">
            <img id="logo-img" src="images/logo.png" alt="Logo do Saforgandia FC" class="logo">
        </div>
        <nav>
            <ul>
                <li><a href="principal.html" data-translate>In√≠cio</a></li>
                <li><a href="#noticias" data-translate>Not√≠cias</a></li>
                <li><a href="#agenda" data-translate>Agenda</a></li>
                <li><a href="#loja" data-translate>Loja</a></li>
                <li><a href="clube.html?id=2" data-translate>Clube</a></li>
            </ul>
        </nav>
    </div>
</header>

<section id="destaques">
    <div id="banner-container">
        <p data-translate>Carregando banners...</p>
    </div>
</section>

<section id="noticias">
    <h2 data-translate>√öltimas Not√≠cias</h2>
    <div id="noticias-container">
        <p data-translate>Carregando not√≠cias...</p>
    </div>
</section>

<footer>
    <p data-translate>&copy; 2025 Safor Club de F√∫tbol Gandia - Todos os direitos reservados.</p>

    <!-- üîπ Novo seletor de idioma estilizado -->
    <div class="language-selector">
        <span>üåê</span>
        <select id="language-dropdown">
            <option value="pt">Portugu√™s</option>
            <option value="en">English</option>
            <option value="es">Espa√±ol</option>
            <option value="fr">Fran√ßais</option>
            <option value="de">Deutsch</option>
        </select>
    </div>
</footer>

<script>
document.addEventListener("DOMContentLoaded", async function () {
    // üîπ Pega o idioma salvo e traduz automaticamente
    const savedLang = localStorage.getItem("selectedLanguage") || "pt";
    document.getElementById("language-dropdown").value = savedLang;
    translatePage(savedLang);

    document.getElementById("language-dropdown").addEventListener("change", function () {
        const selectedLang = this.value;
        localStorage.setItem("selectedLanguage", selectedLang);
        translatePage(selectedLang);
    });

    // üîπ Carregar banners do backend
    try {
        const bannersResponse = await fetch("/api/banners");
        const banners = await bannersResponse.json();

        const bannerContainer = document.getElementById("banner-container");
        bannerContainer.innerHTML = banners.length ? banners.map(banner => 
            `<div class="carousel-item"><img src="${banner.banners_url}" alt="Banner"></div>`).join("") 
            : "<p data-translate>Nenhum banner dispon√≠vel.</p>";

        if (banners.length) iniciarCarrossel();
    } catch (error) {
        console.error("Erro ao carregar banners:", error);
    }

    // üîπ Carregar not√≠cias
    try {
        const noticiasResponse = await fetch("/noticias");
        const noticias = await noticiasResponse.json();

        const noticiasContainer = document.getElementById("noticias-container");
        noticiasContainer.innerHTML = noticias.length ? noticias.map(noticia => 
            `<div class="noticia">
                <img src="${noticia.imagem_url}" alt="${noticia.titulo}">
                <h3 data-translate>${noticia.titulo}</h3>
                <p data-translate>${noticia.conteudo.substring(0, 100)}...</p>
                <a href="noticia.html?id=${noticia.id}" data-translate>Leia mais</a>
            </div>`).join("") 
            : "<p data-translate>Nenhuma not√≠cia dispon√≠vel.</p>";

    } catch (error) {
        console.error("Erro ao carregar not√≠cias:", error);
    }

    // üîπ Carregar logo
    try {
        const logoResponse = await fetch("/api/logo");
        const logoData = await logoResponse.json();
        if (logoData.logo_url) document.getElementById("logo-img").src = logoData.logo_url;
    } catch (error) {
        console.error("Erro ao carregar a logo:", error);
    }
});

// üîπ Fun√ß√£o do carrossel
function iniciarCarrossel() {
    let index = 0;
    const banners = document.querySelectorAll(".carousel-item");

    setInterval(() => {
        banners.forEach((banner, i) => {
            banner.style.transform = `translateX(${(i - index) * 100}%)`;
        });
        index = (index + 1) % banners.length;
    }, 3000);
}
</script>

<script src="translate.js"></script>
</body>
</html>
